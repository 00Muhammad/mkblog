<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MKBLOG - Главная страница блога</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #667eea;
            --bg-secondary: #764ba2;
            --text-primary: #333;
            --text-secondary: #666;
            --bg-white: #ffffff;
            --bg-light: #f8f9fa;
            --bg-card: #ffffff;
            --border-color: #e1e5e9;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] {
            --bg-primary: #4a5568;
            --bg-secondary: #2d3748;
            --text-primary: #e2e8f0;
            --text-secondary: #a0aec0;
            --bg-white: #1a202c;
            --bg-light: #2d3748;
            --bg-card: #2d3748;
            --border-color: #4a5568;
            --shadow: rgba(0, 0, 0, 0.3);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Навигация */
        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px var(--shadow);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        [data-theme="dark"] .navbar {
            background: rgba(26, 32, 44, 0.95);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
        }

        .nav-logo a {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: var(--text-primary);
            font-weight: bold;
            font-size: 1.5rem;
        }

        .logo {
            width: 40px;
            height: 40px;
            margin-right: 10px;
            background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 16px;
        }

        .brand-name {
            background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            color: transparent;
            font-weight: 700;
        }

        .nav-search {
            display: flex;
            gap: 10px;
            flex: 1;
            max-width: 400px;
            margin: 0 2rem;
        }

        .search-input {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 25px;
            outline: none;
            width: 100%;
            transition: all 0.3s ease;
            background: var(--bg-white);
            color: var(--text-primary);
        }

        .search-input:focus {
            border-color: var(--bg-primary);
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 1rem;
            align-items: center;
        }

        .nav-link {
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .nav-link:hover {
            background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
            color: white;
            transform: translateY(-2px);
        }

        .nav-link.active {
            background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
            color: white;
        }

        .login-btn {
            background: transparent;
            border: 2px solid var(--bg-primary);
            color: var(--bg-primary);
        }

        .register-btn {
            background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
            color: white;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: var(--bg-light);
            transform: rotate(30deg);
        }

        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            gap: 4px;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: var(--text-primary);
            transition: 0.3s;
        }

        /* Модальные окна */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: var(--bg-white);
            margin: 10% auto;
            padding: 2rem;
            border-radius: 15px;
            width: 400px;
            max-width: 90%;
            box-shadow: 0 10px 30px var(--shadow);
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal h2 {
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            outline: none;
            background: var(--bg-white);
            color: var(--text-primary);
        }

        .form-group input:focus {
            border-color: var(--bg-primary);
        }

        .modal-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        /* Герой секция */
        .hero {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.9), rgba(118, 75, 162, 0.9));
            color: white;
            padding: 120px 0 80px;
            text-align: center;
            margin-top: 70px;
        }

        [data-theme="dark"] .hero {
            background: linear-gradient(135deg, rgba(74, 85, 104, 0.9), rgba(45, 55, 72, 0.9));
        }

        .hero-title {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .hero-subtitle {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .hero-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
            display: inline-block;
            text-align: center;
            font-size: 0.9rem;
        }

        .btn-primary {
            background: white;
            color: var(--bg-primary);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px var(--shadow);
        }

        .btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }

        .btn-secondary:hover {
            background: white;
            color: var(--bg-primary);
            transform: translateY(-3px);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--bg-primary);
            color: var(--bg-primary);
        }

        .btn-outline:hover {
            background: var(--bg-primary);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
        }

        /* Основной контент */
        .main-content {
            background: var(--bg-white);
            border-radius: 30px 30px 0 0;
            margin-top: -30px;
            position: relative;
            z-index: 1;
            padding: 2rem 0;
            transition: all 0.3s ease;
        }

        .section-title {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 2rem;
            background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            color: transparent;
        }

        /* Создание поста */
        .create-post-section {
            background: var(--bg-light);
            padding: 2rem 0;
        }

        .post-form {
            background: var(--bg-card);
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: 0 5px 20px var(--shadow);
            max-width: 800px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
            font-weight: 500;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            outline: none;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: var(--bg-white);
            color: var(--text-primary);
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            border-color: var(--bg-primary);
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.2);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .file-upload {
            border: 2px dashed var(--border-color);
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload:hover {
            border-color: var(--bg-primary);
            background: var(--bg-light);
        }

        .file-upload i {
            font-size: 2.5rem;
            color: var(--bg-primary);
            margin-bottom: 1rem;
        }

        .file-input {
            display: none;
        }

        .upload-preview {
            margin-top: 1rem;
            display: none;
        }

        .preview-image, .preview-video {
            max-width: 100%;
            max-height: 300px;
            border-radius: 10px;
            margin-top: 1rem;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Посты */
        .posts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            padding: 1rem 0;
        }

        .post-card {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 5px 20px var(--shadow);
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .post-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px var(--shadow);
        }

        .post-author {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .author-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1rem;
        }

        .author-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        .post-date {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .post-content {
            margin-bottom: 1rem;
        }

        .post-content h3 {
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }

        .post-content p {
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .post-media {
            margin: 1rem 0;
            border-radius: 10px;
            overflow: hidden;
        }

        .post-media img, .post-media video {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
            border-radius: 10px;
        }

        /* Лайки, комментарии, шеринг */
        .post-actions {
            display: flex;
            gap: 1rem;
            border-top: 1px solid var(--border-color);
            padding-top: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .post-action {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            background: none;
            border: none;
            font-size: 0.9rem;
            padding: 5px 10px;
            border-radius: 15px;
        }

        .post-action:hover {
            background: var(--bg-light);
            color: var(--text-primary);
        }

        .post-action.liked {
            color: #e74c3c;
        }

        .post-action.liked i {
            color: #e74c3c;
        }

        .likes-count, .comments-count {
            font-size: 0.8rem;
            font-weight: 600;
        }

        .comments-section {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
            width: 100%;
        }

        .comment-form {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .comment-input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            outline: none;
            background: var(--bg-white);
            color: var(--text-primary);
        }

        .comments-list {
            max-height: 200px;
            overflow-y: auto;
        }

        .comment {
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .comment:last-child {
            border-bottom: none;
        }

        .comment-author {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .comment-text {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 0.2rem;
        }

        /* Подвал */
        .footer {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 2rem 0 1rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            margin-bottom: 1rem;
            color: #667eea;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 0.5rem;
        }

        .footer-section a {
            color: #bdc3c7;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-section a:hover {
            color: #667eea;
        }

        .footer-bottom {
            border-top: 1px solid #34495e;
            padding-top: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .footer-links a {
            margin-left: 1rem;
            color: #bdc3c7;
            text-decoration: none;
        }

        /* Адаптивность */
        @media (max-width: 768px) {
            .nav-container {
                flex-wrap: wrap;
                padding: 1rem;
            }

            .nav-search {
                order: 3;
                margin: 1rem 0 0 0;
                max-width: 100%;
            }

            .hamburger {
                display: flex;
            }

            .nav-menu {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background: var(--bg-white);
                box-shadow: 0 5px 20px var(--shadow);
                padding: 1rem;
            }

            .nav-menu.active {
                display: flex;
            }

            .hero-title {
                font-size: 2rem;
            }

            .hero-subtitle {
                font-size: 1rem;
            }

            .hero-actions {
                flex-direction: column;
                align-items: center;
            }

            .posts-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .post-card {
                padding: 1rem;
            }

            .post-actions {
                gap: 0.5rem;
            }

            .modal-content {
                margin: 5% auto;
                padding: 1.5rem;
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .footer-bottom {
                flex-direction: column;
                text-align: center;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 15px;
            }

            .nav-container {
                padding: 0.5rem;
            }

            .hero {
                padding: 100px 0 60px;
            }

            .hero-title {
                font-size: 1.8rem;
            }

            .section-title {
                font-size: 1.5rem;
            }

            .post-form {
                padding: 1rem;
            }

            .form-actions {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Модальное окно входа -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h2><i class="fas fa-lock"></i> Вход в систему</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Логин:</label>
                    <input type="text" id="username" required placeholder="Введите любой логин">
                </div>
                <div class="form-group">
                    <label for="password">Пароль:</label>
                    <input type="password" id="password" required placeholder="Введите любой пароль">
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="btn btn-primary" style="flex: 1;">Войти</button>
                    <button type="button" id="closeModal" class="btn btn-outline" style="flex: 1;">Отмена</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Модальное окно шаринга -->
    <div id="shareModal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-share-alt"></i> Поделиться постом</h3>
            <div class="form-group">
                <label>Ссылка на пост:</label>
                <input type="text" id="shareUrl" readonly style="width: 100%; padding: 8px; border: 1px solid var(--border-color); border-radius: 5px; background: var(--bg-light);">
            </div>
            <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                <button onclick="copyShareUrl()" class="btn btn-primary" style="flex: 1;">
                    <i class="fas fa-copy"></i> Копировать
                </button>
                <button onclick="closeShareModal()" class="btn btn-outline" style="flex: 1;">
                    <i class="fas fa-times"></i> Закрыть
                </button>
            </div>
        </div>
    </div>

    <!-- Навигационная панель -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-logo">
                <a href="index.html">
                    <div class="logo">MK</div>
                    <span class="brand-name">BLOG</span>
                </a>
            </div>
            
            <div class="nav-search">
                <input type="text" id="searchInput" placeholder="Поиск постов..." class="search-input">
                <button class="search-btn btn btn-outline">
                    <i class="fas fa-search"></i>
                </button>
            </div>

            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>

            <ul class="nav-menu" id="navMenu">
                <li class="nav-item">
                    <button class="theme-toggle" id="themeToggle">
                        <i class="fas fa-moon"></i>
                    </button>
                </li>
                <li class="nav-item">
                    <a href="index.html" class="nav-link active">
                        <i class="fas fa-home"></i> Главная
                    </a>
                </li>
                <li class="nav-item" id="createPostLink" style="display: none;">
                    <a href="#create-post" class="nav-link">
                        <i class="fas fa-plus"></i> Создать пост
                    </a>
                </li>
                <li class="nav-item" id="authLinks">
                    <a href="#" class="nav-link login-btn" id="openLogin">
                        <i class="fas fa-sign-in-alt"></i> Войти
                    </a>
                    <a href="#" class="nav-link register-btn" id="openRegister">
                        <i class="fas fa-user-plus"></i> Регистрация
                    </a>
                </li>
                <li class="nav-item" id="userMenu" style="display: none;">
                    <div class="user-dropdown">
                        <span class="user-name" id="userName"></span>
                        <div class="dropdown-content">
                            <a href="profile.html">Мой профиль</a>
                            <a href="#" id="logoutBtn">Выйти</a>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Герой секция -->
    <section class="hero">
        <div class="container">
            <h1 class="hero-title">Добро пожаловать в MKBLOG</h1>
            <p class="hero-subtitle">Платформа для публикации постов с фото и видео</p>
            <div class="hero-actions">
                <a href="#create-post" class="btn btn-primary" id="heroCreatePost" style="display: none;">
                    <i class="fas fa-plus"></i> Создать первый пост
                </a>
                <a href="#posts" class="btn btn-secondary">
                    <i class="fas fa-book-reader"></i> Смотреть посты
                </a>
            </div>
        </div>
    </section>

    <!-- Основной контент -->
    <main class="main-content">
        <!-- Создание поста -->
        <section id="create-post" class="create-post-section" style="display: none;">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-edit"></i> Создать новый пост
                </h2>
                <div class="post-form">
                    <form id="newPostForm">
                        <div class="form-group">
                            <label for="postTitle">Заголовок поста:</label>
                            <input type="text" id="postTitle" placeholder="Введите заголовок..." required>
                        </div>

                        <div class="form-group">
                            <label for="postContent">Текст поста:</label>
                            <textarea id="postContent" placeholder="Напишите что-нибудь..." required></textarea>
                        </div>

                        <div class="form-group">
                            <label>Добавить медиа:</label>
                            <div class="file-upload" id="mediaUpload">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Перетащите фото или видео сюда или нажмите для выбора</p>
                                <p class="text-muted">Поддерживаются: JPG, PNG, GIF, MP4, MOV</p>
                                <input type="file" id="mediaFile" class="file-input" accept="image/*,video/*">
                            </div>
                            <div class="upload-preview" id="mediaPreview">
                                <!-- Превью будет здесь -->
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="postCategory">Категория:</label>
                            <select id="postCategory">
                                <option value="technology">Технологии</option>
                                <option value="lifestyle">Образ жизни</option>
                                <option value="travel">Путешествия</option>
                                <option value="food">Еда</option>
                                <option value="other">Другое</option>
                            </select>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-success">
                                <i class="fas fa-paper-plane"></i> Опубликовать
                            </button>
                            <button type="button" id="cancelPost" class="btn btn-outline">
                                <i class="fas fa-times"></i> Отмена
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Лента постов -->
        <section id="posts" class="posts-section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-newspaper"></i> Последние посты
                </h2>
                <div class="posts-grid" id="postsContainer">
                    <!-- Посты будут добавляться здесь -->
                    <div class="empty-state" id="emptyState">
                        <div style="text-align: center; padding: 3rem; color: var(--text-secondary);">
                            <i class="fas fa-newspaper" style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                            <h3>Пока нет постов</h3>
                            <p>Будьте первым, кто опубликует пост!</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Подвал -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <div class="logo" style="height: 30px; width: 30px; font-size: 12px;">MK</div>
                        <span class="brand-name" style="font-size: 1.2rem;">BLOG</span>
                    </div>
                    <p>Платформа для блогеров. Публикуйте посты с фото и видео.</p>
                </div>
                
                <div class="footer-section">
                    <h3>Навигация</h3>
                    <ul>
                        <li><a href="index.html">Главная</a></li>
                        <li><a href="#posts">Лента постов</a></li>
                        <li><a href="#" id="footerLogin">Войти</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Помощь</h3>
                    <ul>
                        <li><a href="#">Как публиковать</a></li>
                        <li><a href="#">Правила сообщества</a></li>
                        <li><a href="#">Поддержка</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Контакты</h3>
                    <ul>
                        <li><i class="fas fa-envelope"></i> info@mkblog.com</li>
                        <li><i class="fas fa-phone"></i> +7 (999) 123-45-67</li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 MKBLOG. Все права защищены.</p>
                <div class="footer-links">
                    <a href="#">Политика конфиденциальности</a>
                    <a href="#">Условия использования</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Простая система блога с исправленной авторизацией
        class SimpleBlogSystem {
            constructor() {
                this.currentUser = localStorage.getItem('currentUser');
                this.isLoggedIn = !!this.currentUser;
                this.posts = JSON.parse(localStorage.getItem('mkblog_posts')) || [];
                this.likes = JSON.parse(localStorage.getItem('mkblog_likes')) || {};
                this.comments = JSON.parse(localStorage.getItem('mkblog_comments')) || {};
                this.init();
            }

            init() {
                this.checkAuth();
                this.renderPosts();
                this.setupEventListeners();
                this.setupMobileMenu();
                this.setupTheme();
            }

            checkAuth() {
                if (this.isLoggedIn) {
                    this.showUserMenu();
                    this.showCreatePostSection();
                } else {
                    this.showLoginModal();
                }
            }

            showLoginModal() {
                // Модальное окно будет показано при клике на кнопку входа
            }

            hideLoginModal() {
                document.getElementById('loginModal').style.display = 'none';
            }

            login(username, password) {
                if (username && password) {
                    this.currentUser = username;
                    this.isLoggedIn = true;
                    localStorage.setItem('currentUser', username);
                    
                    this.hideLoginModal();
                    this.showUserMenu();
                    this.showCreatePostSection();
                    this.renderPosts();
                    return true;
                }
                return false;
            }

            logout() {
                this.currentUser = null;
                this.isLoggedIn = false;
                localStorage.removeItem('currentUser');
                
                this.hideUserMenu();
                this.hideCreatePostSection();
                this.renderPosts();
                alert('Вы вышли из системы!');
            }

            showUserMenu() {
                document.getElementById('authLinks').style.display = 'none';
                document.getElementById('userMenu').style.display = 'block';
                document.getElementById('userName').textContent = this.currentUser;
                document.getElementById('createPostLink').style.display = 'block';
                document.getElementById('heroCreatePost').style.display = 'inline-block';
            }

            hideUserMenu() {
                document.getElementById('authLinks').style.display = 'block';
                document.getElementById('userMenu').style.display = 'none';
                document.getElementById('createPostLink').style.display = 'none';
                document.getElementById('heroCreatePost').style.display = 'none';
            }

            showCreatePostSection() {
                document.getElementById('create-post').style.display = 'block';
            }

            hideCreatePostSection() {
                document.getElementById('create-post').style.display = 'none';
            }

            setupMobileMenu() {
                const hamburger = document.getElementById('hamburger');
                const navMenu = document.getElementById('navMenu');

                hamburger.addEventListener('click', () => {
                    navMenu.classList.toggle('active');
                    hamburger.classList.toggle('active');
                });

                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', () => {
                        navMenu.classList.remove('active');
                        hamburger.classList.remove('active');
                    });
                });
            }

            setupTheme() {
                const themeToggle = document.getElementById('themeToggle');
                const currentTheme = localStorage.getItem('theme') || 'light';
                
                document.documentElement.setAttribute('data-theme', currentTheme);
                this.updateThemeIcon(currentTheme);

                themeToggle.addEventListener('click', () => {
                    const currentTheme = document.documentElement.getAttribute('data-theme');
                    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                    
                    document.documentElement.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                    this.updateThemeIcon(newTheme);
                });
            }

            updateThemeIcon(theme) {
                const icon = document.querySelector('#themeToggle i');
                icon.className = theme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
            }

            setupEventListeners() {
                // Открытие модального окна входа
                document.getElementById('openLogin').addEventListener('click', (e) => {
                    e.preventDefault();
                    document.getElementById('loginModal').style.display = 'block';
                });

                document.getElementById('footerLogin').addEventListener('click', (e) => {
                    e.preventDefault();
                    document.getElementById('loginModal').style.display = 'block';
                });

                document.getElementById('openRegister').addEventListener('click', (e) => {
                    e.preventDefault();
                    // Простая регистрация - сразу входим
                    const username = prompt('Введите имя пользователя:');
                    const password = prompt('Введите пароль:');
                    if (username && password) {
                        this.login(username, password);
                        alert('Регистрация успешна! Вы вошли в систему.');
                    }
                });

                // Закрытие модального окна
                document.getElementById('closeModal').addEventListener('click', () => {
                    this.hideLoginModal();
                });

                // Форма входа
                document.getElementById('loginForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    const username = document.getElementById('username').value;
                    const password = document.getElementById('password').value;
                    
                    if (this.login(username, password)) {
                        alert('Успешный вход!');
                    } else {
                        alert('Ошибка входа! Проверьте логин и пароль.');
                    }
                });

                // Выход из системы
                document.getElementById('logoutBtn').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.logout();
                });

                // Загрузка медиа
                const mediaUpload = document.getElementById('mediaUpload');
                const mediaFile = document.getElementById('mediaFile');
                const mediaPreview = document.getElementById('mediaPreview');

                mediaUpload.addEventListener('click', () => {
                    mediaFile.click();
                });

                mediaFile.addEventListener('change', (e) => {
                    if (e.target.files.length > 0) {
                        this.handleMediaUpload(e.target.files[0]);
                    }
                });

                // Форма создания поста
                document.getElementById('newPostForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.createPost();
                });

                document.getElementById('cancelPost').addEventListener('click', () => {
                    document.getElementById('newPostForm').reset();
                    mediaPreview.style.display = 'none';
                    mediaPreview.innerHTML = '';
                });

                // Поиск
                document.querySelector('.search-btn').addEventListener('click', () => {
                    this.performSearch();
                });

                document.getElementById('searchInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.performSearch();
                    }
                });

                // Закрытие модальных окон при клике вне их
                window.addEventListener('click', (e) => {
                    const loginModal = document.getElementById('loginModal');
                    const shareModal = document.getElementById('shareModal');
                    
                    if (e.target === loginModal) {
                        this.hideLoginModal();
                    }
                    if (e.target === shareModal) {
                        closeShareModal();
                    }
                });
            }

            handleMediaUpload(file) {
                const mediaPreview = document.getElementById('mediaPreview');
                const reader = new FileReader();

                reader.onload = (e) => {
                    mediaPreview.style.display = 'block';
                    
                    if (file.type.startsWith('image/')) {
                        mediaPreview.innerHTML = `
                            <img src="${e.target.result}" class="preview-image" alt="Превью">
                            <p>Изображение: ${file.name}</p>
                        `;
                    } else if (file.type.startsWith('video/')) {
                        mediaPreview.innerHTML = `
                            <video src="${e.target.result}" class="preview-video" controls></video>
                            <p>Видео: ${file.name}</p>
                        `;
                    }
                };

                reader.readAsDataURL(file);
            }

            createPost() {
                const title = document.getElementById('postTitle').value;
                const content = document.getElementById('postContent').value;
                const category = document.getElementById('postCategory').value;
                const mediaFile = document.getElementById('mediaFile').files[0];

                if (!title || !content) {
                    alert('Заполните заголовок и текст поста!');
                    return;
                }

                const post = {
                    id: Date.now(),
                    author: this.currentUser,
                    title: title,
                    content: content,
                    category: category,
                    date: new Date().toLocaleString('ru-RU'),
                    media: null
                };

                if (mediaFile) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        post.media = {
                            type: mediaFile.type.startsWith('image/') ? 'image' : 'video',
                            data: e.target.result,
                            name: mediaFile.name
                        };
                        this.savePost(post);
                    };
                    reader.readAsDataURL(mediaFile);
                } else {
                    this.savePost(post);
                }
            }

            savePost(post) {
                this.posts.unshift(post);
                localStorage.setItem('mkblog_posts', JSON.stringify(this.posts));
                
                document.getElementById('newPostForm').reset();
                document.getElementById('mediaPreview').style.display = 'none';
                document.getElementById('mediaPreview').innerHTML = '';
                
                this.renderPosts();
                alert('Пост успешно опубликован! Теперь его видят все пользователи!');
            }

            toggleLike(postId) {
                if (!this.isLoggedIn) {
                    alert('Войдите в систему чтобы ставить лайки!');
                    return;
                }

                const likeKey = `${postId}_${this.currentUser}`;
                
                if (this.likes[likeKey]) {
                    delete this.likes[likeKey];
                } else {
                    this.likes[likeKey] = true;
                }

                localStorage.setItem('mkblog_likes', JSON.stringify(this.likes));
                this.renderPosts();
            }

            getLikesCount(postId) {
                return Object.keys(this.likes).filter(key => key.startsWith(postId + '_')).length;
            }

            isPostLiked(postId) {
                const likeKey = `${postId}_${this.currentUser}`;
                return !!this.likes[likeKey];
            }

            addComment(postId, text) {
                if (!this.isLoggedIn) {
                    alert('Войдите в систему чтобы комментировать!');
                    return;
                }

                if (!text || text.trim().length === 0) {
                    alert('Введите текст комментария!');
                    return;
                }

                if (!this.comments[postId]) {
                    this.comments[postId] = [];
                }

                this.comments[postId].push({
                    id: Date.now(),
                    author: this.currentUser,
                    text: text.trim(),
                    date: new Date().toLocaleString('ru-RU')
                });

                localStorage.setItem('mkblog_comments', JSON.stringify(this.comments));
                this.renderPosts();
            }

            getComments(postId) {
                return this.comments[postId] || [];
            }

            sharePost(postId) {
                const postUrl = `${window.location.origin}${window.location.pathname}?post=${postId}`;
                document.getElementById('shareUrl').value = postUrl;
                document.getElementById('shareModal').style.display = 'block';
            }

            performSearch() {
                const query = document.getElementById('searchInput').value.trim();
                if (query) {
                    this.searchPosts(query);
                } else {
                    this.renderPosts();
                }
            }

            searchPosts(query) {
                const filteredPosts = this.posts.filter(post => 
                    post.title.toLowerCase().includes(query.toLowerCase()) ||
                    post.content.toLowerCase().includes(query.toLowerCase()) ||
                    post.author.toLowerCase().includes(query.toLowerCase()) ||
                    this.getCategoryName(post.category).toLowerCase().includes(query.toLowerCase())
                );

                this.renderFilteredPosts(filteredPosts, query);
            }

            renderFilteredPosts(filteredPosts, query) {
                const container = document.getElementById('postsContainer');
                const emptyState = document.getElementById('emptyState');

                if (filteredPosts.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <div style="text-align: center; padding: 3rem; color: var(--text-secondary);">
                                <i class="fas fa-search" style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                                <h3>Ничего не найдено</h3>
                                <p>По запросу "${query}" ничего не найдено</p>
                                <button onclick="blogSystem.renderPosts()" class="btn btn-outline" style="margin-top: 1rem;">
                                    Показать все посты
                                </button>
                            </div>
                        </div>
                    `;
                    return;
                }

                this.renderPostsList(filteredPosts, `Результаты поиска: "${query}"`);
            }

            renderPosts(postsToRender = null) {
                const container = document.getElementById('postsContainer');
                const emptyState = document.getElementById('emptyState');
                const posts = postsToRender || this.posts;

                if (posts.length === 0) {
                    emptyState.style.display = 'block';
                    container.innerHTML = '';
                    container.appendChild(emptyState);
                    return;
                }

                emptyState.style.display = 'none';
                this.renderPostsList(posts);
            }

            renderPostsList(posts, title = null) {
                const container = document.getElementById('postsContainer');
                
                if (title) {
                    container.innerHTML = `<h3 style="text-align: center; margin-bottom: 2rem; color: var(--text-secondary);">${title}</h3>`;
                } else {
                    container.innerHTML = '';
                }

                posts.forEach(post => {
                    const postElement = document.createElement('div');
                    postElement.className = 'post-card';
                    
                    const likesCount = this.getLikesCount(post.id);
                    const isLiked = this.isPostLiked(post.id);
                    const postComments = this.getComments(post.id);
                    
                    let mediaHTML = '';
                    if (post.media) {
                        if (post.media.type === 'image') {
                            mediaHTML = `<div class="post-media"><img src="${post.media.data}" alt="Изображение"></div>`;
                        } else if (post.media.type === 'video') {
                            mediaHTML = `<div class="post-media"><video src="${post.media.data}" controls></video></div>`;
                        }
                    }

                    postElement.innerHTML = `
                        <div class="post-author">
                            <div class="author-avatar">${post.author.charAt(0).toUpperCase()}</div>
                            <div>
                                <div class="author-name">${post.author}</div>
                                <div class="post-date">${post.date} • ${this.getCategoryName(post.category)}</div>
                            </div>
                        </div>
                        <div class="post-content">
                            <h3>${post.title}</h3>
                            <p>${post.content}</p>
                        </div>
                        ${mediaHTML}
                        <div class="post-actions">
                            <button class="post-action ${isLiked ? 'liked' : ''}" onclick="blogSystem.toggleLike(${post.id})">
                                <i class="fas fa-heart"></i>
                                <span class="likes-count">${likesCount}</span>
                            </button>
                            <button class="post-action" onclick="this.nextElementSibling.style.display='block'; this.style.display='none'">
                                <i class="far fa-comment"></i>
                                <span class="comments-count">${postComments.length}</span>
                            </button>
                            <div class="comments-section" style="display: none;">
                                <div class="comment-form">
                                    <input type="text" class="comment-input" placeholder="Напишите комментарий..." 
                                           onkeypress="if(event.key==='Enter') { blogSystem.addComment(${post.id}, this.value); this.value=''; }">
                                    <button class="btn btn-primary" onclick="blogSystem.addComment(${post.id}, this.previousElementSibling.value); this.previousElementSibling.value=''">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                    <button class="btn btn-outline" onclick="this.parentElement.parentElement.style.display='none'; this.parentElement.parentElement.previousElementSibling.style.display='flex'">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="comments-list">
                                    ${postComments.map(comment => `
                                        <div class="comment">
                                            <div class="comment-author">${comment.author}</div>
                                            <div class="comment-text">${comment.text}</div>
                                            <div class="comment-date" style="font-size: 0.8rem; color: var(--text-secondary);">${comment.date}</div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            <button class="post-action" onclick="blogSystem.sharePost(${post.id})">
                                <i class="fas fa-share-alt"></i>
                            </button>
                        </div>
                    `;

                    container.appendChild(postElement);
                });
            }

            getCategoryName(category) {
                const categories = {
                    'technology': 'Технологии',
                    'lifestyle': 'Образ жизни',
                    'travel': 'Путешествия',
                    'food': 'Еда',
                    'other': 'Другое'
                };
                return categories[category] || 'Другое';
            }
        }

        // Глобальные функции для модального окна шаринга
        function copyShareUrl() {
            const shareUrl = document.getElementById('shareUrl');
            shareUrl.select();
            document.execCommand('copy');
            alert('Ссылка скопирована в буфер обмена!');
        }

        function closeShareModal() {
            document.getElementById('shareModal').style.display = 'none';
        }

        // Инициализация системы
        const blogSystem = new SimpleBlogSystem();

        // Глобальный доступ к системе для onclick событий
        window.blogSystem = blogSystem;
    </script>
</body>
</html>
